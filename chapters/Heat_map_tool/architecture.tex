\subsection{Architektura}
\img{\chapterPath/RoundSpot_Architecture.png}{Diagram architektury narzędzia}{round_spot_diagram}{.9}

\paragraph{Aplikacja}
Twórca aplikacji dokonuje integracji narzędzia poprzez jego inicjalizację, w ramach której podawane są  opcjonalne parametry konfiguracyjne oraz funkcje przyjmujące gotowe mapy cieplne. Ponadto z uwagi na aktualne ograniczenia narzędzia wymagane jest ręczne umieszczenie \detector[ów] w odpowiednich miejscach w interfejsie aplikacji.

\paragraph{Flutter} Platforma będąca podstawą działania aplikacji obsługuje zdarzenia takie jak zmiana ekranu, wyjście z aplikacji a także interakcje użytkownika które są przekazywane odpowiednio do \hyperref[par:rs_observers]{obserwatorów stanu} oraz \detector[ów].

\paragraph{Detektory} 
\label{par:rs_detectors}
Są odpowiedzialne za zbieranie i wstępne przetwarzanie interakcji użytkownika oraz innych potrzebnych do działania narzędzia danych takich jak przewijanie treści na ekranie. Każdy z detektorów zbiera dane z fragmentu ekranu którego jest przodkiem w hierarchii drzewa elementów interfejsu. Detektory są automatycznie umieszczane na każdej ze stron aplikacji. W celu stworzenia mapy cieplnej obszaru który jest przewijany (jego rozmiar jest większy od widocznej w dowolnej chwili części) twórca aplikacji musi wstawić dodatkowy detektor będący rodzicem przewijanego elementu interfejsu.

\paragraph{Obserwatory stanu} 
\label{par:rs_observers}
Ich zadaniem jest informowanie \hyperref[par:rs_session_manager]{menedżera sesji} o wydarzeniach takich jak zmiana ekranu lub wyjście z aplikacji.

\paragraph{Sesja}
\label{par:rs_session}
Ograniczony czasowo zbiór danych, odpowiadający konkretnemu obszarowi interfejsu, zawierający wykonane w nim przez użytkownika interakcje oraz zrzut ekranu. Każda sesja posiada tekstowy identyfikator jednoznacznie identyfikujący obszar ekranu którego dotyczy.

\paragraph{Menedżer sesji} 
\label{par:rs_session_manager}
Centralny komponent narzędzia odpowiedzialny zbieranie danych do aktualnie tworzonych map cieplnych oraz koordynację działania pozostałych komponentów. Decyduje, w oparciu o otrzymaną konfigurację, kiedy każda z \session[i] powinna się zakończyć i przekazuje zebrane w ramach niej dane do  \hyperref[par:rs_graphical_processor]{procesora graficznego} w celu przetworzenia na mapę cieplną. Informuje też \hyperref[par:rs_bg_manager]{menedżera tła} o zachodzących zdarzeniach, takich jak przewijanie ekranu.

\paragraph{Menedżer tła} 
\label{par:rs_bg_manager}
Tworzy obrazy interfejsu aplikacji będące tłem dla tworzonych map cieplnych polegając na sygnałach otrzymanych od \hyperref[par:rs_session_manager]{menedżera sesji}. W przypadku obszaru przewijanego wynikowy obraz jest efektem złączenia wielu  obrazów cząstkowych zbieranych w miarę wyświetlania się na ekranie kolejnych fragmentów interfejsu.

\paragraph{Procesor graficzny} 
\label{par:rs_graphical_processor}
Przetwarza interakcje zebrane w ramach sesji do graficznej postaci mapy cieplnej nałożonej na obraz zawartości ekranu. Interakcje położone blisko siebie są grupowane za pomocą algorytmu DBSCAN \cite{DBSCAN_Wiki} a ich ilość i rozłożenie w grupie definiuje jej intensywność i kształt na wynikowej mapie.
